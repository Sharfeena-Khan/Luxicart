
<%-include("../layout/adminHeader.ejs")-%>



<section>
    <div class="content ">
      <div class="row">
        <div class="container d-flex mb-5  ">
          <div class=""    >
            <h5><strong> Products</strong> </h5>
           <span class="opacity-50 "> Dashboard > Product List  > <strong>Add Product</strong></span> 
          </div>
         


          <div>
            <% if (error && error.length > 0) { %>

              <div class="  "  style="margin-top: 70px; color: #f35800; ">
             
                 <ul class="" style="display: inline-flex;  gap: 20px;">
             
                   <% error.forEach(function(errorMessage) { %>
             
                     <li id="errDiv" ><%= errorMessage %></li>
             
                   <% }); %>
             
                 </ul>
             
              </div>
             
             <% } %>
    

             <form  action="/admin/adminPanel/products" method="POST" enctype="multipart/form-data" id="myForm">
           
            


                <div class=" " style="position:fixed; background: #ffffff; left: 1266px;"> 
                    <button type="submit" class="btn text-white  " style="background: #f35800;"><i class="fa-regular fa-plus" style="color: #ffffff;"></i> Save Product</button>
                   </div>
                 </div>
         
         
               </div>
               <div class="container d-flex">
                 <div class="col-7">
                     <h6> <strong> General Information</strong></h6>
                     
                         
           <div class="mb-3">
             <label for="product-name"  class="form-label">Product Name</label>
             <input type="text" class="form-control" id="productName" name="name" placeholder="Type Product name here">
             
           </div>
           <div class="mb-5">
             <label for="discription" class="form-label">Discription</label>
             <textarea class="form-control" rows="5" name="discription" id="comment"></textarea>
           </div>
          
         
         <h6> <strong> Media</strong></h6>
                     
         
         <div class="mb-3">
         <label for="product-image" class="form-label"> Main Photo</label>
         <!--.............................................................................-->
         <div class="col-md-12">
             <div class="col-md-12">
                 <div class="btn-container text-center mt-3">
                     <span>
                         <i class="fa-solid fa-image fa-4x" style="color: #f35800; " ></i>
                     </span>
                    
                     <p> click to add an image</p>
                     <span class="upload-btn-wrapper">
                      <label class="btn" for="fileup" style="background: #f35800; color: #ffffff; " >Add Image</label>
                      <!-- <input type="file" name= "IMG"  id="fileup"  accept=".jpg, .jpeg, .png, .gif"> -->
                      <input type="file" name="IMG" id="fileup" accept="image/*">
                  </span>
                     
                 </div>
                 <!--<button type="submit">Add Product</button> -->
             </div>
             
         </div>

       
         
         <div class="mt-5">
           <h6> <strong> Pricing</strong></h6>
           <label for="product-rice"  class="form-label">Base Price</label>
           <input type="text" class="form-control" id="productPrice" name="price" placeholder="$ Type Base price name here">
           
           <div class="container d-flex">
             <div class="col-6 me-2">
               <label for="product-discountType"  class="form-label mt-3">Discount Type</label>
             <select class="form-select" name="discountType" aria-label="Default select example">
               <option selected>Select</option>
               <option value="1">Clearence Sale</option>
               <option value="2">Season</option>
               <option value="3">Free Shipping</option>
              
             </select>
         
             </div>
             <div class="col-6 ms-2">
               <label for="product-diacountPercentage"  class="form-label mt-3">Discount Percentage</label>
             <select class="form-select" name="percentage" aria-label="Default select example">
               <option selected>Select</option>
               <option value="1">70% or more</option>
               <option value="2">60% or more</option>
               <option value="3">50% or more</option>
               <option value="3">40% or more</option>
               <option value="3">30% or more</option>
             </select>
         
             </div>
             
           </div>
         </div>
         <div class="mt-5 mb-5 pb-5">
           <h6> <strong> Inventory</strong></h6>
           <div class="container d-flex">
             <div class="col-6 me-2">
               <label for="product-sku"   class="form-label mt-3">SKU</label>
               <input type="text" class="form-control" id="product-SKU" name="SKU" placeholder="Type product SKU here">
             </div>
             <div class="col-6 ms-2">
               <label for="product-Quantity"  class="form-label mt-3">Quantity</label>
               <input type="text" class="form-control" id="productQty" name="qty" placeholder="Type product Quantity here">
             </div>
           </div>
         </div>
         
         </div>
         
                 </div>
         
         
                 <div>
         
                   <div class="ms-5">
                     <h6> <strong> Category</strong></h6>
                     
                         
                     <div class="mb-3">
                      <label for="product-category" class="form-label">Product Category</label>
                      <select class="form-select" name="category" aria-label="Default select example">
                        <option selected>Select the Category</option>
                        <% if (categories.length > 0) { %>
                          <% categories.forEach(category => { %>
                            <option value="<%= category.name %>"><%= category.name %></option>
                          <% }); %>
                        <% } %>
                        
                      </select>
                    </div>
                    
             <label for="product-status"  class="form-label mt-3">Status</label>
             <select class="form-select" name="status" aria-label="Default select example">
               <option selected>Select</option>
               <option >Draft</option>
               <option >Out of stock</option>
               <option >Published</option>
              
             </select>
             
           </div> 




            </form>




          </div>

        
  


        </div>




      </div>
      

    </div>
   
           
        
   
</section>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<script>
    // Function to display selected images
    function displaySelectedImages() {
        const fileInput = document.getElementById('fileup');
        const imagePreviewContainer = document.getElementById('image-preview-container');

        // Clear any previously displayed images
        imagePreviewContainer.innerHTML = '';

        // Get the selected files
        const selectedFiles = fileInput.files;

        // Loop through the selected files and display them
        for (let i = 0; i < selectedFiles.length; i++) {
            const file = selectedFiles[i];

            // Create an image element for each selected image
            const imageElement = document.createElement('img');
            imageElement.src = URL.createObjectURL(file);
            imageElement.className = 'selected-image';
            
            // Append the image to the image preview container
            imagePreviewContainer.appendChild(imageElement);
        }
    }

    // Add an event listener to the file input to trigger the displaySelectedImages function when files are selected
    const fileInput = document.getElementById('fileup');
    fileInput.addEventListener('change', displaySelectedImages);
</script>

<script>
  function hideMsg(){
    const msg = document.getElementById("errDiv")
    if(msg){
      setTimeout(()=>{
        msg.style.display = "none"
      },4000)
    }
  }
 window.onload =  hideMsg()

</script>